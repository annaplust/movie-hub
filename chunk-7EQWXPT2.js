import{d as c,e as s}from"./chunk-7ENLRDSZ.js";import{a as m}from"./chunk-ZONMNTHJ.js";import{r as t,z as v}from"./chunk-JVFSG5EK.js";import{Q as p,W as l,a as n,b as a,qa as d,uc as u}from"./chunk-25VTUDJ3.js";var h="w300",y=["producer","screenplay","novel","director"],g=class r{languageService=l(m);currentLanguage=this.languageService.currentLanguage;apiUrl=v.api.url;selectedMovieId=d(null);movieEndpoint=u(()=>this.selectedMovieId()?`${this.apiUrl}/movie/${this.selectedMovieId()}`:null);trendingDayMovies=t(()=>`${this.apiUrl}/trending/movie/day?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseMovieResults(e)});trendingWeekMovies=t(()=>`${this.apiUrl}/trending/movie/week?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseMovieResults(e).splice(0,10)});upcomingMovies=t(()=>`${this.apiUrl}/movie/upcoming?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseMovieResults(e)});nowPlayingMovies=t(()=>`${this.apiUrl}/movie/now_playing?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseMovieResults(e)});movieDetails=t(()=>{let e=this.movieEndpoint();return e?`${e}?language=${this.currentLanguage()}`:void 0},{defaultValue:void 0,parse:e=>this.parseMovieDetails(e)});movieExternalIds=t(()=>{let e=this.movieEndpoint();return e?`${e}/external_ids`:void 0},{defaultValue:void 0});movieCredits=t(()=>{let e=this.movieEndpoint();return e?`${e}/credits`:void 0},{defaultValue:void 0,parse:e=>this.parseCredits(e)});movieRecommendations=t(()=>{let e=this.movieEndpoint();return e?`${e}/recommendations?language=${this.currentLanguage()}`:void 0},{defaultValue:[],parse:e=>this.parseMovieResults(e)});movieSimilar=t(()=>{let e=this.movieEndpoint();return e?`${e}/similar?language=${this.currentLanguage()}`:void 0},{defaultValue:[],parse:e=>this.parseMovieResults(e)});setSelectedMovieId(e){this.selectedMovieId.set(e)}parseMovieResults(e){return e.results.map(i=>a(n({},i),{poster_path:c(i.poster_path,h),media_type:"movie"}))}parseMovieDetails(e){return a(n({},e),{production_companies_names:e.production_companies?.map(i=>i.name).join(", ")??"",production_countries_names:e.production_countries?.map(i=>i.name).join(", ")??""})}parseCredits(e){let i=e.cast?.map(o=>a(n({},o),{profile_path:s(o.profile_path)}))??[],f=e.crew?.filter(o=>y.includes(o.job.toLowerCase())).map(o=>a(n({},o),{job:o.job.toLowerCase(),profile_path:s(o.profile_path)})).sort((o,M)=>o.job.localeCompare(M.job))??[];return a(n({},e),{cast:i,crew:f})}static \u0275fac=function(i){return new(i||r)};static \u0275prov=p({token:r,factory:r.\u0275fac,providedIn:"root"})};export{g as a};
