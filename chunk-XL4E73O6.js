import{a as gt,b as _t,c as ft}from"./chunk-XQK6PFQD.js";import"./chunk-FN4WXW7I.js";import"./chunk-BMA7WWEI.js";import"./chunk-KTEJV523.js";import{a as at,b as rt,c as lt,e as pt,f as ct}from"./chunk-WDEGRDOL.js";import"./chunk-BYXBJQAS.js";import{a as F,b as B,c as st,d as dt,e as mt}from"./chunk-OEQDNAZ2.js";import{aa as it,b as et,d as nt,ga as ot}from"./chunk-2KXCTR5L.js";import{A as tt,h as G,k as J,s as P,u as K,x as Q,z as X}from"./chunk-J5LE5QTC.js";import{Cb as d,Ka as Y,Kb as s,Lb as m,Ma as a,Mb as k,Nb as Z,O as U,Rb as b,Sb as w,Tb as g,U as O,Wa as N,Xb as q,a as D,ab as h,b as T,cc as f,dc as y,ec as S,hb as u,jb as W,mb as _,oa as j,rb as l,sb as r,sc as H,tb as x}from"./chunk-NM4URTZ5.js";var $="w300";var L=class i{languageService=O(ot);currentLanguage=this.languageService.currentLanguage;apiUrl=tt.api.url;selectedPersonId=j(null);personEndpoint=H(()=>this.selectedPersonId()?`${this.apiUrl}/person/${this.selectedPersonId()}`:null);trendingDayPeople=P(()=>`${this.apiUrl}/trending/person/day?language=${this.currentLanguage()}`,{defaultValue:[],parse:t=>this.parsePeopleResults(t)});personDetails=P(()=>{let t=this.personEndpoint();return t?`${t}?language=${this.currentLanguage()}`:void 0},{defaultValue:void 0,parse:t=>this.parsePersonDetails(t)});personMovieCredits=P(()=>{let t=this.personEndpoint();return t?`${t}/movie_credits?language=${this.currentLanguage()}`:void 0},{defaultValue:[],parse:t=>this.parseMovieCredits(t)});personTvCredits=P(()=>{let t=this.personEndpoint();return t?`${t}/tv_credits?language=${this.currentLanguage()}`:void 0},{defaultValue:[],parse:t=>this.parseTvShowCredits(t)});personExternalIds=P(()=>{let t=this.personEndpoint();return t?`${t}/external_ids`:void 0});setSelectedPersonId(t){this.selectedPersonId.set(t)}parsePeopleResults(t){return t.results.map(e=>({imageUrl:B(e.profile_path),name:e.name,link:`/person/${e.id}`}))}parsePersonDetails(t){return T(D({},t),{profile_path:B(t.profile_path,$)})}parseMovieCredits(t){return t.cast?.map(e=>T(D({},e),{poster_path:F(e.poster_path,$),media_type:"movie"}))??[]}parseTvShowCredits(t){return t.cast?.map(e=>T(D({},e),{poster_path:F(e.poster_path,$),media_type:"tv"}))??[]}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var vt=(i,t)=>[i,t];function Pt(i,t){if(i&1&&x(0,"img",2),i&2){d();let e=g(0);u("src",e.profile_path,Y)("alt",e.name)}}function Ot(i,t){i&1&&x(0,"p-skeleton",3)}function bt(i,t){if(i&1&&(l(0,"div",13),s(1),r()),i&2){d(2);let e=g(0);a(),k(" ",e.known_for_department," ")}}function wt(i,t){if(i&1&&(l(0,"div",14),s(1),r()),i&2){d(2);let e=g(0);a(),k(" ",e.biography," ")}}function St(i,t){if(i&1&&(l(0,"h1",12),s(1),r(),h(2,bt,2,1,"div",13)(3,wt,2,1,"div",14)),i&2){d();let e=g(0);a(),m(e.name),a(),_(e.known_for_department?2:-1),a(),_(e.biography?3:-1)}}function It(i,t){i&1&&(x(0,"p-skeleton",15)(1,"p-skeleton",16),l(2,"div",14),x(3,"p-skeleton",17)(4,"p-skeleton",18)(5,"p-skeleton",19)(6,"p-skeleton",20)(7,"p-skeleton",21)(8,"p-skeleton",20),r())}function At(i,t){if(i&1&&(l(0,"div",22)(1,"span",23),s(2),f(3,"translate"),r(),l(4,"span",24),s(5),f(6,"date"),r()()),i&2){d(2);let e=g(0);a(2),m(y(3,2,"dateOfDeath")),a(3),m(S(6,4,e.deathday,"dd.MM.yyyy"))}}function Et(i,t){if(i&1&&(l(0,"div",22)(1,"span",23),s(2),f(3,"translate"),r(),l(4,"span",24),s(5),r()()),i&2){d(2);let e=g(0);a(2),m(y(3,2,"placeOfBirth")),a(3),m(e.place_of_birth)}}function Dt(i,t){if(i&1&&(l(0,"div",22)(1,"span",23),s(2),f(3,"translate"),r(),l(4,"span",24),s(5),f(6,"date"),r()(),h(7,At,7,7,"div",22)(8,Et,6,4,"div",22)),i&2){let e=d(),o=g(0);a(2),m(y(3,5,"dateOfBirth")),a(3),Z(" ",S(6,7,o.birthday,"dd.MM.yyyy")," (",e.calculateAge(o.birthday,o.deathday),") "),a(2),_(o.deathday?7:-1),a(),_(o.place_of_birth?8:-1)}}function Tt(i,t){if(i&1&&x(0,"fa-icon",31),i&2){let e=d(3);u("icon",e.faClapperboard)}}function kt(i,t){if(i&1&&x(0,"fa-icon",31),i&2){let e=d(3);u("icon",e.faTv)}}function Lt(i,t){if(i&1&&(l(0,"div",35)(1,"span",36),s(2,"as"),r(),l(3,"span",37),s(4),r()()),i&2){let e=d().$implicit;a(4),m(e.character)}}function Rt(i,t){if(i&1&&(b(0)(1),f(2,"date"),b(3),f(4,"date"),b(5),l(6,"tr",28)(7,"td",29),s(8),r(),l(9,"td",30),h(10,Tt,1,1,"fa-icon",31)(11,kt,1,1,"fa-icon",31),r(),l(12,"td",32)(13,"div",33)(14,"a",34),s(15),r(),h(16,Lt,5,1,"div",35),r()()()),i&2){let e=t.$implicit,o=t.rowIndex,n=d(2),p=g(1),C=g(2),v=n.getCombinedCredits(p,C),I=S(2,9,e.date,"yyyy")||"-",R=o>0?S(4,12,v[o-1].date,"yyyy")||"-":null,A=o===0||I!==R;a(6),W("filmography-year-start",A)("filmography-same-year",!A),a(2),m(I),a(2),_(e.type==="movie"?10:11),a(4),u("routerLink",q(15,vt,e.type==="movie"?"/movie":"/tv",e.id)),a(),k(" ",e.title," "),a(),_(e.character?16:-1)}}function Ft(i,t){if(i&1&&(l(0,"section",6)(1,"h2",7),s(2),f(3,"translate"),r(),l(4,"div",25)(5,"p-table",26),h(6,Rt,17,18,"ng-template",27),r()()()),i&2){let e=d(),o=g(1),n=g(2);a(2),m(y(3,2,"filmography")),a(3),u("value",e.getCombinedCredits(o,n))}}function Bt(i,t){if(i&1&&(l(0,"div",11),x(1,"app-external-links",38),r()),i&2){d();let e=g(3);a(),u("ids",e)}}var ht=class i{peopleService=O(L);route=O(K);actorDetailsResource=this.peopleService.personDetails;movieCreditsResource=this.peopleService.personMovieCredits;tvCreditsResource=this.peopleService.personTvCredits;personExternalIds=this.peopleService.personExternalIds;faStar=lt;faClapperboard=ct;faTv=pt;ngOnInit(){this.route.params.subscribe(t=>{this.peopleService.selectedPersonId.set(t.id)})}getCombinedCredits(t,e){let o=[];return t&&t.forEach(n=>{o.push({id:n.id,title:n.title,character:n.character,date:n.release_date?new Date(n.release_date):null,type:"movie",release_date:n.release_date,poster_path:n.poster_path,popularity:n.popularity,vote_average:n.vote_average,vote_count:n.vote_count,media_type:n.media_type})}),e&&e.forEach(n=>{o.push({id:n.id,title:n.name,character:n.character,date:n.first_air_date?new Date(n.first_air_date):null,type:"tv",release_date:n.first_air_date,poster_path:n.poster_path,popularity:n.popularity,vote_average:n.vote_average,vote_count:n.vote_count,media_type:n.media_type})}),o.sort((n,p)=>{if(n.date&&p.date){if(n.date!==p.date)return p.date-n.date}else{if(n.date&&!p.date)return 1;if(!n.date&&p.date)return-1}return(n.title||"").localeCompare(p.title||"")})}calculateAge(t,e){let o=new Date(t),n=e?new Date(e):new Date,p=n.getFullYear()-o.getFullYear(),C=n.getMonth()-o.getMonth();return(C<0||C===0&&n.getDate()<o.getDate())&&p--,p}getMostFamousWorks(t,e,o=5){let p=this.getCombinedCredits(t,e).filter(c=>c.vote_average>0&&c.vote_count>0);if(p.length===0)return[];let C=p.map(c=>c.vote_count),v=p.map(c=>c.popularity),I=p.map(c=>typeof c.order=="number"?c.order:0),R=Math.min(...C),A=Math.max(...C),Ct=Math.min(...v),xt=Math.max(...v),z=Math.max(...I),V=(c,M,E)=>E===M?.5:(c-M)/(E-M);return p.forEach(c=>{let M=V(c.vote_count,R,A),E=c.vote_average/10,ut=V(c.popularity,Ct,xt),yt=z>0?1-c.order/z:.5;c._knownForScore=M*.4+E*.3+ut*.2+yt*.1}),p.sort((c,M)=>M._knownForScore-c._knownForScore).slice(0,o)}formatBiography(t,e=300){if(!t)return{text:"",isTruncated:!1};if(t.length<=e)return{text:t,isTruncated:!1};let o=t.substring(0,e),n=Math.max(o.lastIndexOf("."),o.lastIndexOf("!"),o.lastIndexOf("?")),p=n>e*.7?n+1:e;return{text:t.substring(0,p).trim(),isTruncated:!0}}getUniqueDepartments(t,e){let o=new Set;return t&&t.forEach(n=>{n.department&&o.add(n.department)}),e&&e.forEach(n=>{n.department&&o.add(n.department)}),Array.from(o)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=N({type:i,selectors:[["app-actor-details"]],decls:30,vars:20,consts:[[1,"hero"],[1,"hero__container"],[1,"hero__portrait",3,"src","alt"],["width","300px","height","450px"],[1,"hero__details"],[1,"main-content"],[1,"content-section"],[1,"section-title"],[1,"known-for-container"],["image","poster_path","header","title",3,"items","loading"],[1,"personal-details"],[1,"external-links-container"],[1,"hero__name"],[1,"hero__profession"],[1,"hero__bio"],["height","50px","width","350px",1,"hero__name"],["height","22px","width","160px",1,"hero__profession"],["height","25px","width","80%"],["height","25px","width","100%"],["height","25px","width","70%"],["height","25px","width","50%"],["height","25px","width","90%"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"filmography-table"],[1,"credits-table",3,"value"],["pTemplate","body"],[1,"filmography-row"],[1,"filmography-year"],[1,"filmography-type"],[1,"media-icon",3,"icon"],[1,"filmography-title"],[1,"title-container"],[1,"title-link",3,"routerLink"],[1,"character-info"],[1,"character-as"],[1,"character-name"],[3,"ids"]],template:function(e,o){if(e&1&&(b(0)(1)(2)(3),l(4,"div",0)(5,"div",1),h(6,Pt,1,2,"img",2)(7,Ot,1,0,"p-skeleton",3),l(8,"div",4),h(9,St,4,3)(10,It,9,0),r()()(),l(11,"div",5)(12,"section",6)(13,"h2",7),s(14),f(15,"translate"),r(),l(16,"div",8),x(17,"app-horizontal-scroll-list",9),r()(),l(18,"section",6)(19,"h2",7),s(20),f(21,"translate"),r(),l(22,"div",10),h(23,Dt,9,10),r()(),h(24,Ft,7,4,"section",6),l(25,"section",6)(26,"h2",7),s(27),f(28,"translate"),r(),h(29,Bt,2,1,"div",11),r()()),e&2){let n=w(o.actorDetailsResource.value());a();let p=w(o.movieCreditsResource.value());a();let C=w(o.tvCreditsResource.value());a();let v=w(o.personExternalIds.value());a(3),_(!o.actorDetailsResource.isLoading()&&n?6:7),a(3),_(!o.actorDetailsResource.isLoading()&&n?9:10),a(5),m(y(15,14,"knownFor")),a(3),u("items",o.getMostFamousWorks(p,C,10))("loading",o.movieCreditsResource.isLoading()||o.tvCreditsResource.isLoading()),a(3),m(y(21,16,"details")),a(3),_(n?23:-1),a(),_(p&&C?24:-1),a(3),m(y(28,18,"externalLinks")),a(2),_(v?29:-1)}},dependencies:[nt,et,X,Q,_t,gt,it,mt,G,rt,at,J,ft,dt,st],styles:['h2[_ngcontent-%COMP%]:not(:first-of-type){margin-top:48px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;min-height:300px}.loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--p-gray-300);border-top:3px solid var(--p-amber-500);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{color:var(--p-gray-600);font-size:16px;font-weight:500}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.hero[_ngcontent-%COMP%]{width:100%;display:flex;padding:20px}.hero__container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;align-items:center}.hero__details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.hero__portrait[_ngcontent-%COMP%]{width:200px;height:auto;border-radius:16px;box-shadow:0 8px 32px #0009;transition:transform .3s ease;aspect-ratio:2/3;object-fit:cover}.hero__portrait[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.hero__name[_ngcontent-%COMP%]{margin:0 0 8px;text-align:center;font-weight:800;letter-spacing:-.5px}.hero__profession[_ngcontent-%COMP%]{margin-bottom:16px;text-align:center;opacity:.9;font-weight:500}.hero__bio[_ngcontent-%COMP%]{margin-bottom:16px;line-height:1.6;opacity:.95;position:relative;display:flex;flex-direction:column;gap:5px;width:100%}.personal-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(12rem,auto) 1fr;margin-bottom:12px}.personal-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-weight:600;display:flex;align-items:center;gap:8px}.personal-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{display:flex;align-items:center}.main-content[_ngcontent-%COMP%]   .content-section.filmography-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin-bottom:24px}.filmography-table[_ngcontent-%COMP%]   .credits-table[_ngcontent-%COMP%]   .p-datatable-header[_ngcontent-%COMP%]{background:var(--p-gray-50);border-bottom:2px solid var(--p-amber-500)}.filmography-table[_ngcontent-%COMP%]   .credits-table[_ngcontent-%COMP%]   .p-datatable-tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-weight:500}.filmography-table[_ngcontent-%COMP%]   .filmography-row[_ngcontent-%COMP%]:first-of-type   td[_ngcontent-%COMP%]{padding-top:20px}.filmography-table[_ngcontent-%COMP%]   .filmography-row[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%]{padding-bottom:20px}.filmography-table[_ngcontent-%COMP%]   .filmography-row.filmography-year-start[_ngcontent-%COMP%]:not(:last-child)   td[_ngcontent-%COMP%], .filmography-table[_ngcontent-%COMP%]   .filmography-row.filmography-same-year[_ngcontent-%COMP%]:not(:last-child)   td[_ngcontent-%COMP%]{border-bottom:none}.filmography-table[_ngcontent-%COMP%]   .filmography-row.filmography-year-start[_ngcontent-%COMP%]:has(+.filmography-year-start)   td[_ngcontent-%COMP%]{padding-bottom:20px}.filmography-table[_ngcontent-%COMP%]   .filmography-row.filmography-same-year[_ngcontent-%COMP%]:has(+.filmography-year-start)   td[_ngcontent-%COMP%]{padding-bottom:20px}.filmography-table[_ngcontent-%COMP%]   .filmography-row.filmography-year-start[_ngcontent-%COMP%]:not(:first-child)   td[_ngcontent-%COMP%]{border-top:2px solid var(--p-zinc-500);padding-top:20px}.filmography-table[_ngcontent-%COMP%]   .filmography-row.filmography-same-year[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:none}.filmography-table[_ngcontent-%COMP%]   .filmography-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.filmography-table[_ngcontent-%COMP%]   .filmography-row[_ngcontent-%COMP%]   .filmography-title[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.filmography-table[_ngcontent-%COMP%]   .filmography-row[_ngcontent-%COMP%]   .filmography-title[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .title-link[_ngcontent-%COMP%]{font-weight:500;width:fit-content}.filmography-table[_ngcontent-%COMP%]   .filmography-row[_ngcontent-%COMP%]   .filmography-title[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .character-info[_ngcontent-%COMP%]{display:flex;gap:4px}.filmography-table[_ngcontent-%COMP%]   .filmography-row[_ngcontent-%COMP%]   .filmography-title[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .character-info[_ngcontent-%COMP%]   .character-as[_ngcontent-%COMP%], .filmography-table[_ngcontent-%COMP%]   .filmography-row[_ngcontent-%COMP%]   .filmography-title[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .character-info[_ngcontent-%COMP%]   .character-name[_ngcontent-%COMP%]{font-size:.875rem}.filmography-table[_ngcontent-%COMP%]   .filmography-row[_ngcontent-%COMP%]   .filmography-title[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .character-info[_ngcontent-%COMP%]   .character-as[_ngcontent-%COMP%]{color:var(--p-zinc-400)}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:var(--p-gray-500);font-style:italic}.no-data[_ngcontent-%COMP%]:before{content:"\\f119";font-family:"Font Awesome 6 Free";font-weight:900;font-size:3em;display:block;margin-bottom:16px;opacity:.3}@media (min-width: 1400px){.hero[_ngcontent-%COMP%]{justify-content:center}.hero__container[_ngcontent-%COMP%]{max-width:1276px;left:calc(-700px + 50vw)}}@media (min-width: 769px){.main-content[_ngcontent-%COMP%]{padding:32px}.main-content[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]{padding:40px;margin-top:0}.main-content[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]:first-of-type{padding-top:0}.hero[_ngcontent-%COMP%]{padding:48px 64px;margin-top:0}.hero__container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;gap:40px}.hero__details[_ngcontent-%COMP%]{padding-top:32px;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;height:100%;flex:1}.hero__portrait[_ngcontent-%COMP%]{width:300px;height:auto;border-radius:16px;box-shadow:0 12px 40px #000000b3}.hero__name[_ngcontent-%COMP%]{text-align:left;margin-bottom:12px;font-size:clamp(28px,4vw,42px)}.hero__profession[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left;font-size:18px}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.content-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out;animation-fill-mode:both}.content-section[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.content-section[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.content-section[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.content-section[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}']})};export{ht as ActorDetailsComponent};
