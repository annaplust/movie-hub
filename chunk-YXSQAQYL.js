import{a as c,b as s}from"./chunk-G7NTSF3L.js";import{ga as m}from"./chunk-FF6AFZCM.js";import{A as v,s as n}from"./chunk-F4X3CPPA.js";import{O as l,U as p,a as t,b as a,oa as d,sc as u}from"./chunk-NM4URTZ5.js";var h="w300",y=["producer","screenplay","novel","director"],g=class r{languageService=p(m);currentLanguage=this.languageService.currentLanguage;apiUrl=v.api.url;selectedMovieId=d(null);movieEndpoint=u(()=>this.selectedMovieId()?`${this.apiUrl}/movie/${this.selectedMovieId()}`:null);trendingDayMovies=n(()=>`${this.apiUrl}/trending/movie/day?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseMovieResults(e)});trendingWeekMovies=n(()=>`${this.apiUrl}/trending/movie/week?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseMovieResults(e).splice(0,10)});upcomingMovies=n(()=>`${this.apiUrl}/movie/upcoming?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseMovieResults(e)});nowPlayingMovies=n(()=>`${this.apiUrl}/movie/now_playing?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseMovieResults(e)});movieDetails=n(()=>{let e=this.movieEndpoint();return e?`${e}?language=${this.currentLanguage()}`:void 0},{defaultValue:void 0,parse:e=>this.parseMovieDetails(e)});movieExternalIds=n(()=>{let e=this.movieEndpoint();return e?`${e}/external_ids`:void 0},{defaultValue:void 0});movieCredits=n(()=>{let e=this.movieEndpoint();return e?`${e}/credits`:void 0},{defaultValue:void 0,parse:e=>this.parseCredits(e)});movieRecommendations=n(()=>{let e=this.movieEndpoint();return e?`${e}/recommendations?language=${this.currentLanguage()}`:void 0},{defaultValue:[],parse:e=>this.parseMovieResults(e)});movieSimilar=n(()=>{let e=this.movieEndpoint();return e?`${e}/similar?language=${this.currentLanguage()}`:void 0},{defaultValue:[],parse:e=>this.parseMovieResults(e)});setSelectedMovieId(e){this.selectedMovieId.set(e)}parseMovieResults(e){return e.results.map(i=>a(t({},i),{poster_path:c(i.poster_path,h)}))}parseMovieDetails(e){return a(t({},e),{production_companies_names:e.production_companies?.map(i=>i.name).join(", ")??"",production_countries_names:e.production_countries?.map(i=>i.name).join(", ")??""})}parseCredits(e){let i=e.cast?.map(o=>a(t({},o),{profile_path:s(o.profile_path)}))??[],f=e.crew?.filter(o=>y.includes(o.job.toLowerCase())).map(o=>a(t({},o),{job:o.job.toLowerCase(),profile_path:s(o.profile_path)})).sort((o,M)=>o.job.localeCompare(M.job))??[];return a(t({},e),{cast:i,crew:f})}static \u0275fac=function(i){return new(i||r)};static \u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"})};export{g as a};
