import{a as s,b as p}from"./chunk-G7NTSF3L.js";import{ga as c}from"./chunk-FF6AFZCM.js";import{A as v,s as a}from"./chunk-F4X3CPPA.js";import{O as l,U as u,a as n,b as o,oa as d,sc as h}from"./chunk-NM4URTZ5.js";var g="w300",m=["producer","screenplay","novel","director","creator","executive producer"],S=class i{languageService=u(c);currentLanguage=this.languageService.currentLanguage;apiUrl=v.api.url;selectedTvShowId=d(null);tvEndpoint=h(()=>this.selectedTvShowId()?`${this.apiUrl}/tv/${this.selectedTvShowId()}`:null);trendingDayTvShows=a(()=>`${this.apiUrl}/trending/tv/day?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseTvShowResults(e)});trendingWeekTvShows=a(()=>`${this.apiUrl}/trending/tv/week?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseTvShowResults(e)});popularTvShows=a(()=>`${this.apiUrl}/tv/popular?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseTvShowResults(e)});topRatedTvShows=a(()=>`${this.apiUrl}/tv/top_rated?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseTvShowResults(e)});onTheAirTvShows=a(()=>`${this.apiUrl}/tv/on_the_air?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseTvShowResults(e)});airingTodayTvShows=a(()=>`${this.apiUrl}/tv/airing_today?language=${this.currentLanguage()}`,{defaultValue:[],parse:e=>this.parseTvShowResults(e)});tvDetails=a(()=>{let e=this.tvEndpoint();return e?`${e}?language=${this.currentLanguage()}`:void 0},{defaultValue:void 0,parse:e=>this.parseTvShowDetails(e)});tvExternalIds=a(()=>{let e=this.tvEndpoint();return e?`${e}/external_ids`:void 0},{defaultValue:void 0});tvCredits=a(()=>{let e=this.tvEndpoint();return e?`${e}/credits`:void 0},{defaultValue:void 0,parse:e=>this.parseCredits(e)});tvRecommendations=a(()=>{let e=this.tvEndpoint();return e?`${e}/recommendations?language=${this.currentLanguage()}`:void 0},{defaultValue:[],parse:e=>this.parseTvShowResults(e)});tvSimilar=a(()=>{let e=this.tvEndpoint();return e?`${e}/similar?language=${this.currentLanguage()}`:void 0},{defaultValue:[],parse:e=>this.parseTvShowResults(e)});similarTvShows=a(()=>{let e=this.tvEndpoint();return e?`${e}/similar?language=${this.currentLanguage()}`:void 0},{defaultValue:[],parse:e=>this.parseTvShowResults(e)});setSelectedTvShowId(e){this.selectedTvShowId.set(e)}parseTvShowResults(e){return e.results.map(t=>o(n({},t),{poster_path:s(t.poster_path,g),backdrop_path:s(t.backdrop_path,"w1280")}))}parseTvShowDetails(e){return o(n({},e),{poster_path:s(e.poster_path,g),backdrop_path:s(e.backdrop_path,"w1280"),production_companies_names:e.production_companies?.map(t=>t.name).join(", ")??"",production_countries_names:e.production_countries?.map(t=>t.name).join(", ")??"",created_by_names:e.created_by?.map(t=>t.name).join(", ")??"",networks_names:e.networks?.map(t=>t.name).join(", ")??""})}parseCredits(e){let t=e.cast?.map(r=>o(n({},r),{profile_path:p(r.profile_path)}))??[],w=e.crew?.filter(r=>m.includes(r.job.toLowerCase())).map(r=>o(n({},r),{job:r.job.toLowerCase().replace(" ",""),profile_path:p(r.profile_path)})).sort((r,T)=>r.job.localeCompare(T.job))??[];return o(n({},e),{cast:t,crew:w})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{S as a};
